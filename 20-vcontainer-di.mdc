---
name: VContainer Dependency Injection
description: Defines how dependency injection, lifetime scopes, and MessagePipe registration are handled using VContainer. Use this rule when registering services, scopes, or entry points.
---


# VContainer DI Rules (with MessagePipe)

## LifetimeScopes
- ProjectLifetimeScope:
  - Global services
  - Save system
  - Clock
  - Global MessagePipe (rare)
- SceneLifetimeScope:
  - Scene gameplay
  - Scene UI
  - Scene-scoped MessagePipe (preferred)

## MessagePipe Registration
- Always register MessagePipe via VContainer.
- Prefer scoped brokers.
- No static/global brokers.

## Anti-patterns
- Service locator usage — forbidden
- Manual new() for services — forbidden
